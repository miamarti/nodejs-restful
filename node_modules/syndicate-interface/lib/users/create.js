
/**
 * Creates a user from the normal email/username/password flow.
 */

var syndicate = require('../syndicate')
var User = require('./user')

module.exports = function* (obj) {
  var user = new User()
  yield [
    User.set.slug(user, obj.slug),
    User.set.email(user, obj.email),
    User.set.password(user, obj.password)
  ]
  syndicate.emit('user', user)
  return user
}
