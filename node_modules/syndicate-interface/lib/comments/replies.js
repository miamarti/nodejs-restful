
/**
 * Get top-level comments to a thing.
 */

var mdb = require('../databases/mongodb')

module.exports = function (options) {
  var thing = options.thing
  var offset = options.offset || 0
  var limit = options.limit || 25
  var criteria = {
    deleted: false,
    closed: false,
    'root._id': thing._id,
    'parent._id': thing._id,
    'id.ancestors.0': thing._id
  }

  return mdb.comments.find(criteria)
    .limit(limit)
    .offset(offset)
}
